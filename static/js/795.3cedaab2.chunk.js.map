{"version":3,"file":"static/js/795.3cedaab2.chunk.js","mappings":"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","sources":["components/MovieList/MovieList.styled.js","components/MovieList/MovieList.js","components/MovieSearch/MovieSearch.styled.js","components/MovieSearch/MovieSearch.js","pages/movies.js","utils/fetch-movies.js"],"sourcesContent":["import styled from \"@emotion/styled\";\n\nexport const Movies = styled.ul`\n    padding: 40px 100px;\n    line-height: 1.5;\n    width: fit-content;\n    \n    li {\n        position: relative;\n        display: flex;\n        gap: 5px 10px;\n        margin-bottom: 10px;\n\n        svg {\n            position: absolute;\n            top: 2px;\n        }\n\n        .disabled-info-icon {\n            opacity: .2;\n        }\n        .show-info-icon {\n            transition: transform 100ms linear;\n        }\n\n        .show-info-icon:hover {\n            transform: rotate(90deg);\n\n            &~div p {\n                display: block;\n                padding: 20px;\n                font-size: 16px;\n                background-color: #ddd;\n            }\n        }\n\n        .movie-item-wrap {\n           padding-left: 40px;\n           max-width: 600px;\n\n            a {                \n                transition: text-decoration 200ms linear;\n                \n                &:hover {\n                    text-decoration: underline;\n                } \n            }\n\n            p {\n                display: none;\n            }\n        }\n    }`;\n","import { Movies} from \"./MovieList.styled\";\nimport {IoIosPlayCircle} from \"react-icons/io\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nexport const MovieList = ({movies}) => {\n    const location = useLocation();\n\n    return (\n        <Movies>\n            {movies.map(({id, title, release_date, overview}) => {\n                const date = new Date(release_date);\n                const year = date.getFullYear();\n                return (\n                    <li key = {id}>\n                        <IoIosPlayCircle className={overview ? \"show-info-icon\" : \"disabled-info-icon\"} size=\"30px\"/> \n                        <div className=\"movie-item-wrap\">\n                            <Link to={`/movies/${id}`} state={{ from: location }}> {title} {release_date && \"- \" + year}</Link>\n                            {overview && <p>{overview}</p>}\n                        </div>\n                        \n                    </li>\n                )\n            })}\n        </Movies>\n    );\n}","import styled from \"@emotion/styled\";\n\nexport const SearchForm = styled.form`\n    display: flex;\n    padding: 40px 0 0 100px;\n\n    input{\n        padding: 5px;\n        font-size: inherit;\n        border: solid 2px black;\n    }\n\n    button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 0px;\n        border-left: none;\n        background-color: #d2d2d2;\n\n    &:hover, &:focus {\n        background-color: #f0f0f0;\n    }\n    }\n`;","import { SearchForm } from \"./MovieSearch.styled\";\nimport {CgSearch} from \"react-icons/cg\"\n\nexport const MovieSearch = ({onSubmit}) => {\n    return (\n        <SearchForm onSubmit = {onSubmit}>\n            <input name=\"search\" type='text'/>\n            <button><CgSearch size = \"20\"/></button>\n        </SearchForm>\n    )\n};","import { useEffect, useState } from \"react\";\nimport { Outlet, useSearchParams } from \"react-router-dom\";\nimport { getMovies } from \"utils/fetch-movies\";\nimport { MovieList } from \"components/MovieList/MovieList\";\nimport { MovieSearch } from \"components/MovieSearch/MovieSearch\";\n\nexport default function Movies () {\n    const [movies, setMovies] = useState([]);\n    const [query, setQuery] = useState('');\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n\n    const [searchParams, setSearchParams] = useSearchParams('');\n    \n\n    useEffect(() => {\n        const title = searchParams.get('title') ?? '';\n        title && setQuery(title);\n    }, [searchParams]);\n\n    // infifnite scroll\n    useEffect(() => {\n        const options = {\n            root: null,\n            rootMargin: '40%',\n            treshhold: 0,\n        };\n\n        const observer = new IntersectionObserver(() => {\n            setPage(page => page + 1)\n        }, options);\n        const guard = document.querySelector('.guard');\n        guard && observer.observe(guard);\n    }, [totalPages]);\n\n    // set total pages\n    useEffect(() => {\n        const getTotalPages = async () => {\n            const pages = await(await getMovies('search', query)).data.total_pages;\n            setTotalPages(pages);\n        };\n\n        query && getTotalPages();\n        \n    }, [query]);\n\n    // render movies\n    useEffect(() => {\n        const findMovies = async () => {\n            if (page) {\n                const newMovies = await(await getMovies({requestType: 'search', query, page})).data.results;\n                setMovies(movies => [...movies, ...newMovies]); \n            }\n            return;\n        }\n        query && findMovies();\n    }, [query, page]);\n\n    const onSearch = e => {\n        e.preventDefault();\n        const queryStr = e.target.elements.search.value.toLowerCase().trim();\n        setPage(1);\n        setMovies([]);\n        setQuery(queryStr);\n        queryStr && setSearchParams({title: queryStr});\n    }\n\n    return (\n        <>        \n        <MovieSearch onSubmit={onSearch}/>\n        <MovieList movies = {movies}/>\n        <Outlet/>\n        {page < totalPages && <div className=\"guard\"/>}\n        </>\n    );\n};","import axios from \"axios\";\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '8cb2067df7427c657a5f093d2a8e51ae';\nexport const baseImgUrl = 'https://image.tmdb.org/t/p/w500/';\n\n\nexport const getMovies = ({requestType = 'trending', query = '', page = 1}) => {\n    let path = '';\n    switch (requestType) {\n        case 'trending':\n            path = 'trending/movie/day';\n            return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}&page=${page}`);\n        case 'search': \n            path = '/search/movie';\n            return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}&query=${query}&page=${page}`);\n        default:\n            break;\n    }\n   \n}\n\nexport const getMovieById = id => {\n    const path = `/movie/${id}`;\n    return  axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}`);\n}\n\nexport const getMovieDetails = ({type, id}) => {\n    let path = '';\n    switch (type) {\n        case 'cast':\n           path = `/movie/${id}/credits`;\n           break;\n        case 'reviews':\n            path = `movie/${id}/reviews`;\n            break;\n        default:\n            throw new Error('Invalid details type meaning in get movie details'); \n    }\n    \n    return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}`);\n}\n"],"names":["Movies","styled","MovieList","movies","location","useLocation","map","id","title","release_date","overview","year","Date","getFullYear","className","size","to","state","from","SearchForm","MovieSearch","onSubmit","name","type","useState","setMovies","query","setQuery","page","setPage","totalPages","setTotalPages","useSearchParams","searchParams","setSearchParams","useEffect","get","observer","IntersectionObserver","root","rootMargin","treshhold","guard","document","querySelector","observe","getTotalPages","getMovies","data","total_pages","pages","findMovies","requestType","results","newMovies","e","preventDefault","queryStr","target","elements","search","value","toLowerCase","trim","BASE_URL","API_KEY","baseImgUrl","path","axios","getMovieById","getMovieDetails","Error"],"sourceRoot":""}