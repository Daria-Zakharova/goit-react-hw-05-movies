{"version":3,"file":"static/js/795.aeb9b344.chunk.js","mappings":"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","sources":["components/MovieList/MovieList.styled.js","components/MovieList/MovieList.js","components/NoDataMsg/NoDataMsg,styled.js","components/NoDataMsg/NoDataMsg.js","components/MovieSearch/MovieSearch.styled.js","components/MovieSearch/MovieSearch.js","pages/movies.js","utils/fetch-movies.js"],"sourcesContent":["import styled from \"@emotion/styled\";\n\nexport const Movies = styled.ul`\n    padding: 40px 100px;\n    line-height: 1.5;\n    width: fit-content;\n    \n    li {\n        position: relative;\n        display: flex;\n        gap: 5px 10px;\n        margin-bottom: 10px;\n\n        svg {\n            position: absolute;\n            top: 2px;\n        }\n\n        .disabled-info-icon {\n            opacity: .2;\n        }\n        .show-info-icon {\n            transition: transform 100ms linear;\n        }\n\n        .show-info-icon:hover {\n            transform: rotate(90deg);\n\n            &~div p {\n                display: block;\n                padding: 20px;\n                font-size: 16px;\n                background-color: #ddd;\n            }\n        }\n\n        .movie-item-wrap {\n           padding-left: 40px;\n           max-width: 600px;\n\n            a {                \n                transition: text-decoration 200ms linear;\n                \n                &:hover {\n                    text-decoration: underline;\n                } \n            }\n\n            p {\n                display: none;\n            }\n        }\n    }`;\n","import { Movies} from \"./MovieList.styled\";\nimport {IoIosPlayCircle} from \"react-icons/io\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nexport const MovieList = ({movies}) => {\n    const location = useLocation();\n\n    return (\n        <Movies>\n            {movies.map(({id, title, release_date, overview}) => {\n                const date = new Date(release_date);\n                const year = date.getFullYear();\n                return (\n                    <li key = {id}>\n                        <IoIosPlayCircle className={overview ? \"show-info-icon\" : \"disabled-info-icon\"} size=\"30px\"/> \n                        <div className=\"movie-item-wrap\">\n                            <Link to={`/movies/${id}`} state={{ from: location }}> {title} {release_date && \"- \" + year}</Link>\n                            {overview && <p>{overview}</p>}\n                        </div>\n                        \n                    </li>\n                )\n            })}\n        </Movies>\n    );\n}","import styled from \"@emotion/styled\";\n\nexport const Msg = styled.div`\n    padding: 40px 100px;\n    font-size: 20px;\n`;","import { Msg } from \"./NoDataMsg,styled\"\n\nexport const NoDataMsg = ({message}) => {\n    return (\n        <Msg>{message}</Msg>\n    )\n}","import styled from \"@emotion/styled\";\n\nexport const SearchForm = styled.form`\n    display: flex;\n    padding: 40px 0 0 100px;\n\n    input{\n        padding: 5px;\n        font-size: inherit;\n        border: solid 2px black;\n    }\n\n    button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 0px;\n        border-left: none;\n        background-color: #d2d2d2;\n\n    &:hover, &:focus {\n        background-color: #f0f0f0;\n    }\n    }\n`;","import { SearchForm } from \"./MovieSearch.styled\";\nimport {CgSearch} from \"react-icons/cg\"\nimport { useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\nexport const MovieSearch = ({onSubmit}) => {\n    const [searchParams] = useSearchParams();\n    const title = searchParams.get('title') ?? '';\n    const [query, setQuery] = useState(title);\n    return (\n        <SearchForm onSubmit = {onSubmit}>\n            <input name=\"search\" type='text' value = {query} onChange = {(e) => setQuery(e.target.value)}/>\n            <button><CgSearch size = \"20\"/></button>\n        </SearchForm>\n    )\n};","import { useEffect, useState } from \"react\";\nimport { Outlet, useSearchParams } from \"react-router-dom\";\nimport { getMovies } from \"utils/fetch-movies\";\nimport { MovieList } from \"components/MovieList/MovieList\";\nimport { MovieSearch } from \"components/MovieSearch/MovieSearch\";\nimport { NoDataMsg } from \"components/NoDataMsg/NoDataMsg\";\n\nexport default function Movies () {\n    const [movies, setMovies] = useState([]);\n    const [query, setQuery] = useState('');\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n\n    const [searchParams, setSearchParams] = useSearchParams('');    \n\n    useEffect(() => {\n        const title = searchParams.get('title') ?? '';\n        title && setQuery(title);\n    }, [searchParams]);\n\n    // infifnite scroll\n    useEffect(() => {\n        const options = {\n            root: null,\n            rootMargin: '40%',\n            treshhold: 0,\n        };\n\n        const observer = new IntersectionObserver(() => {\n            setPage(page => page + 1)\n        }, options);\n        const guard = document.querySelector('.guard');\n        guard && observer.observe(guard);\n    }, [totalPages]);\n\n    // set total pages\n    useEffect(() => {\n        const getTotalPages = async () => {\n            const pages = await(await getMovies('search', query)).data.total_pages;\n            setTotalPages(pages);\n        };\n\n        query && getTotalPages();\n        \n    }, [query]);\n\n    // render movies\n    useEffect(() => {\n        const findMovies = async () => {\n            if (page) {\n                const newMovies = await(await getMovies({requestType: 'search', query, page})).data.results;\n                setMovies(movies => [...movies, ...newMovies]); \n            }\n            return;\n        }\n        query && findMovies();\n    }, [query, page]);\n\n    const onSearch = e => {\n        e.preventDefault();\n        const queryStr = e.target.elements.search.value.toLowerCase().trim();\n        setPage(1);\n        setMovies([]);\n        setQuery(queryStr);\n        queryStr && setSearchParams({title: queryStr});\n    }\n\n    return (\n        <>        \n        <MovieSearch onSubmit={onSearch} />\n        {query && !movies.length && <NoDataMsg message = {`Sorry, there is no movie titled ${query}`}/>}\n        {movies.length !== 0 && <MovieList movies = {movies}/>}\n\n        <Outlet/>\n        {page < totalPages && <div className=\"guard\"/>}\n        </>\n    );\n};\n","import axios from \"axios\";\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '8cb2067df7427c657a5f093d2a8e51ae';\nexport const baseImgUrl = 'https://image.tmdb.org/t/p/w500/';\n\n\nexport const getMovies = ({requestType = 'trending', query = '', page = 1}) => {\n    let path = '';\n    switch (requestType) {\n        case 'trending':\n            path = 'trending/movie/day';\n            return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}&page=${page}`);\n        case 'search': \n            path = '/search/movie';\n            return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}&query=${query}&page=${page}`);\n        default:\n            break;\n    }\n   \n}\n\nexport const getMovieById = id => {\n    const path = `/movie/${id}`;\n    return  axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}`);\n}\n\nexport const getMovieDetails = ({type, id}) => {\n    let path = '';\n    switch (type) {\n        case 'cast':\n           path = `/movie/${id}/credits`;\n           break;\n        case 'reviews':\n            path = `movie/${id}/reviews`;\n            break;\n        default:\n            throw new Error('Invalid details type meaning in get movie details'); \n    }\n    \n    return axios.get(`${BASE_URL}/${path}?api_key=${API_KEY}`);\n}\n"],"names":["Movies","styled","MovieList","movies","location","useLocation","map","id","title","release_date","overview","year","Date","getFullYear","className","size","to","state","from","Msg","NoDataMsg","message","SearchForm","MovieSearch","onSubmit","useSearchParams","get","useState","query","setQuery","name","type","value","onChange","e","target","setMovies","page","setPage","totalPages","setTotalPages","searchParams","setSearchParams","useEffect","observer","IntersectionObserver","root","rootMargin","treshhold","guard","document","querySelector","observe","getTotalPages","getMovies","data","total_pages","pages","findMovies","requestType","results","newMovies","preventDefault","queryStr","elements","search","toLowerCase","trim","length","BASE_URL","API_KEY","baseImgUrl","path","axios","getMovieById","getMovieDetails","Error"],"sourceRoot":""}